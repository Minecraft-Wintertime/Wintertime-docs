# Для разработчиков

## Правила написания Skript

В обязательном порядке все игры должны иметь команды для старта и завершения игры, а также переменную состояния игры (идет в данный момент игра или нет).

Существуют общие скрипты *chat.sk* и *teams.sk* реализующие работу команд и чата.

Для однородности кода следует придерживаться следующих правил:

- Использовать Tab, а не пробел
- Если весь код попадает под условие, лучше использовать in-line синтаксис. В противном случае писать *if* обязательно. К примеру, вместо:

```skript
if player has permission "admin":
    message "You're admin!" 
```

разрешено использовать:

```skript
player has permission "admin"
message "You're admin!"
```

- Скрипт не должен зависеть от конкретной карты, запрещено использовать конкретные координаты в коде
- Не использовать аддоны кроме [skript-reflect](https://github.com/TPGamesNL/skript-reflect), [skript-db](https://git.limework.net/Limework/skript-db) и [SkBee](https://github.com/ShaneBeee/SkBee)
- Для логики команд использовать *teams.sk*
- Кодировка всех файлов UTF-8

## Структура сервера

Используется распределенная структура сервера. Это означает что одновременно запущено несколько экземпляров сервера Minecraft и игрок перемещается между ними по мере необходимости. Каждый игровой режим имеет собственный экземпляр сервера. Таким образом можно распределять ресурсы физической машины, отключая неиспользуемые сервера.

Всегда запущены сервера прокси и лобби. Прокси обеспечивает передачу данных между серверами и игроком, это не игровой сервер. В лобби игроки проводят время между играми.

Игрок всегда подключен к прокси-серверу на порту 25565, на нем же происходит авторизация. Обойти прокси нельзя, все остальные порты закрыты снаружи, а сами сервера отслеживают соединение игрока с прокси.

Для прокси используется [Velocity](https://github.com/PaperMC/Velocity). Для игровых серверов ядро [Patina](https://github.com/PatinaMC/Patina).
Для поддержки Bedrock игроков плагины [Geyser](https://github.com/GeyserMC/Geyser) и [Floodgate](https://github.com/GeyserMC/Floodgate).

## Полезные ссылки

- [Основная документация](https://docs.skriptlang.org/)

- [Документация по всем существующим выражениям](https://skripthub.net/docs/)

- [Гайд для начинающих](https://skripthub.net/tutorials/17)

## Дисклеймер

Работая над данным проектом, вы соглашаетесь передать произведенную интеллектуальную собственность, связанную с ним, в мою пользу. Частичное или полное использование материалов проекта допускается только с разрешения его владельца.
